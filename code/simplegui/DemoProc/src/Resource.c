/*************************************************************************/
/** Copyright.                                                          **/
/** FileName: Resource.c                                                **/
/** Author: Polarix                                                     **/
/** Version: 1.0.0.0                                                    **/
/** Description: GB2312 font resource data, used FZXS-12 font.          **/
/*************************************************************************/
//=======================================================================//
//= Include files.                                                      =//
//=======================================================================//
#include "Resource.h"
#include "sd_card.h"
//=======================================================================//
//= Static function declaration.                                        =//
//=======================================================================//
static SGUI_INT         GetCharIndex_GB2312(SGUI_UINT32 uiCode);
static SGUI_CSZSTR      StepNext_GB2312(SGUI_CSZSTR cszSrc, SGUI_UINT32* puiCode);
static SGUI_SIZE        GB2312_GetFontData(SGUI_SIZE sStartAddr, SGUI_BYTE* pDataBuffer, SGUI_SIZE sReadSize);
static SGUI_BOOL        GB2312_IsFullWidth(SGUI_UINT32 uiCode);

//=======================================================================//
//= Global variable declaration.                                        =//
//=======================================================================//
const SGUI_BYTE GB2312_H12[] = {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // space    Index 0
  0x00, 0x00, 0xFC, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, // !
  0x00, 0x00, 0x0E, 0x00, 0x0E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // "
  0x90, 0xD0, 0xBC, 0xD0, 0xBC, 0x90, 0x00, 0x03, 0x00, 0x03, 0x00, 0x00, // #
  0x18, 0x24, 0xFE, 0x44, 0x88, 0x00, 0x01, 0x02, 0x07, 0x02, 0x01, 0x00, // $
  0x18, 0x24, 0xD8, 0xB0, 0x4C, 0x80, 0x00, 0x03, 0x00, 0x01, 0x02, 0x01, // %
  0xC0, 0x38, 0xE4, 0x38, 0x80, 0x00, 0x01, 0x02, 0x02, 0x01, 0x02, 0x02, // &
  0x00, 0x00, 0x0E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // '
  0x00, 0x00, 0x00, 0xF0, 0x0C, 0x02, 0x00, 0x00, 0x00, 0x00, 0x03, 0x04, // (
  0x02, 0x0C, 0xF0, 0x00, 0x00, 0x00, 0x04, 0x03, 0x00, 0x00, 0x00, 0x00, // )
  0x90, 0x60, 0xF8, 0x60, 0x90, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, // *
  0x20, 0x20, 0xFC, 0x20, 0x20, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, // +
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x06, 0x00, 0x00, 0x00, 0x00, // ,
  0x20, 0x20, 0x20, 0x20, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // -
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x00, // .
  0x00, 0x80, 0x60, 0x18, 0x06, 0x00, 0x06, 0x01, 0x00, 0x00, 0x00, 0x00, // /
  0xF8, 0x04, 0x04, 0x04, 0xF8, 0x00, 0x01, 0x02, 0x02, 0x02, 0x01, 0x00, // 0
  0x00, 0x08, 0xFC, 0x00, 0x00, 0x00, 0x00, 0x02, 0x03, 0x02, 0x00, 0x00, // 1
  0x18, 0x84, 0x44, 0x24, 0x18, 0x00, 0x03, 0x02, 0x02, 0x02, 0x02, 0x00, // 2
  0x08, 0x04, 0x24, 0x24, 0xD8, 0x00, 0x01, 0x02, 0x02, 0x02, 0x01, 0x00, // 3
  0x40, 0xB0, 0x88, 0xFC, 0x80, 0x00, 0x00, 0x00, 0x02, 0x03, 0x02, 0x00, // 4
  0x3C, 0x24, 0x24, 0x24, 0xC4, 0x00, 0x01, 0x02, 0x02, 0x02, 0x01, 0x00, // 5
  0xF8, 0x24, 0x24, 0x24, 0xC8, 0x00, 0x01, 0x02, 0x02, 0x02, 0x01, 0x00, // 6
  0x0C, 0x04, 0xE4, 0x14, 0x0C, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, // 7
  0xD8, 0x24, 0x24, 0x24, 0xD8, 0x00, 0x01, 0x02, 0x02, 0x02, 0x01, 0x00, // 8
  0x38, 0x44, 0x44, 0x44, 0xF8, 0x00, 0x01, 0x02, 0x02, 0x02, 0x01, 0x00, // 9
  0x00, 0x00, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, // :
  0x00, 0x00, 0x30, 0x00, 0x00, 0x00, 0x00, 0x04, 0x03, 0x00, 0x00, 0x00, // ;
  0x00, 0x20, 0x50, 0x88, 0x04, 0x02, 0x00, 0x00, 0x00, 0x00, 0x01, 0x02, // <
  0x90, 0x90, 0x90, 0x90, 0x90, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // =
  0x00, 0x02, 0x04, 0x88, 0x50, 0x20, 0x00, 0x02, 0x01, 0x00, 0x00, 0x00, // >
  0x18, 0x04, 0xC4, 0x24, 0x18, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, // ?
  0xF8, 0x04, 0xE4, 0x94, 0x78, 0x00, 0x01, 0x02, 0x02, 0x02, 0x02, 0x00, // @
  0x00, 0xF0, 0x9C, 0x9C, 0xF0, 0x00, 0x02, 0x03, 0x00, 0x00, 0x03, 0x02, // A
  0x04, 0xFC, 0x24, 0x24, 0xD8, 0x00, 0x02, 0x03, 0x02, 0x02, 0x01, 0x00, // B
  0xF8, 0x04, 0x04, 0x04, 0x08, 0x00, 0x01, 0x02, 0x02, 0x02, 0x01, 0x00, // C
  0x04, 0xFC, 0x04, 0x04, 0xF8, 0x00, 0x02, 0x03, 0x02, 0x02, 0x01, 0x00, // D
  0x04, 0xFC, 0x24, 0x74, 0x0C, 0x00, 0x02, 0x03, 0x02, 0x02, 0x03, 0x00, // E
  0x04, 0xFC, 0x24, 0x74, 0x0C, 0x00, 0x02, 0x03, 0x02, 0x00, 0x00, 0x00, // F
  0xF8, 0x04, 0x04, 0x44, 0xCC, 0x40, 0x01, 0x02, 0x02, 0x02, 0x01, 0x00, // G
  0x04, 0xFC, 0x20, 0x20, 0xFC, 0x04, 0x02, 0x03, 0x00, 0x00, 0x03, 0x02, // H
  0x04, 0x04, 0xFC, 0x04, 0x04, 0x00, 0x02, 0x02, 0x03, 0x02, 0x02, 0x00, // I
  0x00, 0x04, 0x04, 0xFC, 0x04, 0x04, 0x02, 0x04, 0x04, 0x03, 0x00, 0x00, // J
  0x04, 0xFC, 0x24, 0xD0, 0x0C, 0x04, 0x02, 0x03, 0x02, 0x00, 0x03, 0x02, // K
  0x04, 0xFC, 0x04, 0x00, 0x00, 0x00, 0x02, 0x03, 0x02, 0x02, 0x02, 0x03, // L
  0xFC, 0x3C, 0xC0, 0x3C, 0xFC, 0x00, 0x03, 0x00, 0x03, 0x00, 0x03, 0x00, // M
  0x04, 0xFC, 0x30, 0xC4, 0xFC, 0x04, 0x02, 0x03, 0x02, 0x00, 0x03, 0x02, // N
  0xF8, 0x04, 0x04, 0x04, 0xF8, 0x00, 0x01, 0x02, 0x02, 0x02, 0x01, 0x00, // O
  0x04, 0xFC, 0x24, 0x24, 0x18, 0x00, 0x02, 0x03, 0x02, 0x00, 0x00, 0x00, // P
  0xF8, 0x84, 0x84, 0x04, 0xF8, 0x00, 0x01, 0x02, 0x02, 0x07, 0x04, 0x00, // Q
  0x04, 0xFC, 0x24, 0x64, 0x98, 0x00, 0x02, 0x03, 0x02, 0x00, 0x03, 0x02, // R
  0x18, 0x24, 0x24, 0x44, 0x88, 0x00, 0x01, 0x02, 0x02, 0x02, 0x01, 0x00, // S
  0x0C, 0x04, 0xFC, 0x04, 0x0C, 0x00, 0x00, 0x02, 0x03, 0x02, 0x00, 0x00, // T
  0x04, 0xFC, 0x00, 0x00, 0xFC, 0x04, 0x00, 0x01, 0x02, 0x02, 0x01, 0x00, // U
  0x04, 0x7C, 0x80, 0x80, 0x7C, 0x04, 0x00, 0x00, 0x03, 0x03, 0x00, 0x00, // V
  0x1C, 0xE0, 0x3C, 0xE0, 0x1C, 0x00, 0x00, 0x03, 0x00, 0x03, 0x00, 0x00, // W
  0x04, 0x9C, 0x60, 0x9C, 0x04, 0x00, 0x02, 0x03, 0x00, 0x03, 0x02, 0x00, // X
  0x04, 0x1C, 0xE0, 0x1C, 0x04, 0x00, 0x00, 0x02, 0x03, 0x02, 0x00, 0x00, // Y
  0x0C, 0x84, 0x64, 0x1C, 0x04, 0x00, 0x02, 0x03, 0x02, 0x02, 0x03, 0x00, // Z
  0x00, 0x00, 0xFE, 0x02, 0x02, 0x00, 0x00, 0x00, 0x07, 0x04, 0x04, 0x00, // [
  0x00, 0x0E, 0x30, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x02, 0x00, // '\'
  0x00, 0x02, 0x02, 0xFE, 0x00, 0x00, 0x00, 0x04, 0x04, 0x07, 0x00, 0x00, // ]
  0x00, 0x04, 0x02, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // ^
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, // _
  0x00, 0x00, 0x02, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // `
  0x00, 0x40, 0xA0, 0xA0, 0xC0, 0x00, 0x00, 0x01, 0x02, 0x02, 0x01, 0x02, // a
  0x04, 0xFC, 0x20, 0x20, 0xC0, 0x00, 0x00, 0x03, 0x02, 0x02, 0x01, 0x00, // b
  0x00, 0xC0, 0x20, 0x20, 0x60, 0x00, 0x00, 0x01, 0x02, 0x02, 0x02, 0x00, // c
  0x00, 0xC0, 0x20, 0x24, 0xFC, 0x00, 0x00, 0x01, 0x02, 0x02, 0x01, 0x02, // d
  0x00, 0xC0, 0xA0, 0xA0, 0xC0, 0x00, 0x00, 0x01, 0x02, 0x02, 0x02, 0x00, // e
  0x00, 0x20, 0xF8, 0x24, 0x24, 0x04, 0x00, 0x02, 0x03, 0x02, 0x02, 0x00, // f
  0x00, 0x40, 0xA0, 0xA0, 0x60, 0x20, 0x00, 0x07, 0x0A, 0x0A, 0x0A, 0x04, // g
  0x04, 0xFC, 0x20, 0x20, 0xC0, 0x00, 0x02, 0x03, 0x00, 0x00, 0x03, 0x02, // h
  0x00, 0x20, 0xE4, 0x00, 0x00, 0x00, 0x00, 0x02, 0x03, 0x02, 0x00, 0x00, // i
  0x00, 0x00, 0x20, 0xE4, 0x00, 0x00, 0x08, 0x08, 0x08, 0x07, 0x00, 0x00, // j
  0x04, 0xFC, 0x80, 0xA0, 0x60, 0x20, 0x02, 0x03, 0x02, 0x00, 0x03, 0x02, // k
  0x04, 0x04, 0xFC, 0x00, 0x00, 0x00, 0x02, 0x02, 0x03, 0x02, 0x02, 0x00, // l
  0xE0, 0x20, 0xE0, 0x20, 0xC0, 0x00, 0x03, 0x00, 0x03, 0x00, 0x03, 0x00, // m
  0x20, 0xE0, 0x20, 0x20, 0xC0, 0x00, 0x02, 0x03, 0x02, 0x00, 0x03, 0x02, // n
  0x00, 0xC0, 0x20, 0x20, 0xC0, 0x00, 0x00, 0x01, 0x02, 0x02, 0x01, 0x00, // o
  0x20, 0xE0, 0x20, 0x20, 0xC0, 0x00, 0x08, 0x0F, 0x0A, 0x02, 0x01, 0x00, // p
  0x00, 0xC0, 0x20, 0x20, 0xE0, 0x00, 0x00, 0x01, 0x02, 0x0A, 0x0F, 0x08, // q
  0x20, 0xE0, 0x40, 0x20, 0x20, 0x00, 0x02, 0x03, 0x02, 0x00, 0x00, 0x00, // r
  0x00, 0x40, 0xA0, 0xA0, 0x20, 0x00, 0x00, 0x02, 0x02, 0x02, 0x01, 0x00, // s
  0x00, 0x20, 0xF8, 0x20, 0x00, 0x00, 0x00, 0x00, 0x01, 0x02, 0x02, 0x00, // t
  0x20, 0xE0, 0x00, 0x20, 0xE0, 0x00, 0x00, 0x01, 0x02, 0x02, 0x01, 0x02, // u
  0x20, 0xE0, 0x00, 0x00, 0xE0, 0x20, 0x00, 0x00, 0x03, 0x03, 0x00, 0x00, // v
  0x60, 0x80, 0xE0, 0x80, 0x60, 0x00, 0x00, 0x03, 0x00, 0x03, 0x00, 0x00, // w
  0x20, 0x60, 0x80, 0x60, 0x20, 0x00, 0x02, 0x03, 0x00, 0x03, 0x02, 0x00, // x
  0x20, 0xE0, 0x20, 0x80, 0x60, 0x20, 0x08, 0x08, 0x07, 0x01, 0x00, 0x00, // y
  0x00, 0x20, 0xA0, 0x60, 0x20, 0x00, 0x00, 0x02, 0x03, 0x02, 0x02, 0x00, // z
  0x00, 0x00, 0x60, 0x9E, 0x02, 0x00, 0x00, 0x00, 0x00, 0x07, 0x04, 0x00, // {
  0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x00, 0x00, // |
  0x00, 0x02, 0x9E, 0x60, 0x00, 0x00, 0x00, 0x04, 0x07, 0x00, 0x00, 0x00, // }
  0x04, 0x02, 0x02, 0x04, 0x04, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // ~        Index 94
#ifdef _SIMPLE_GUI_DEMO_INNER_CHS_
#endif
};

const SGUI_FONT_RES GB2312_FZXS12 = {
  /*SGUI_INT                      iHalfWidth*/            6,
  /*SGUI_INT                      iFullWidth*/            12,
  /*SGUI_INT                      iHeight*/               12,
  /*SGUI_FN_IF_GET_CHAR_INDEX     fnGetIndex*/            GetCharIndex_GB2312,
  /*SGUI_FN_IF_GET_DATA           fnGetData*/             GB2312_GetFontData,
  /*SGUI_FN_IF_STEP_NEXT          fnStepNext*/            StepNext_GB2312,
  /*SGUI_FN_IF_IS_FULL_WIDTH      fnIsFullWidth*/         GB2312_IsFullWidth
};

//=======================================================================//
//= Function define.                                                    =//
//=======================================================================//
/*************************************************************************/
/** Function Name:  GetCharIndex_GB2312                                 **/
/** Purpose:        Get character index in font library.                **/
/** Resources:      None.                                               **/
/** Params:                                                             **/
/** @ uiCode[in]:   Character code.                                     **/
/** Return:         Character index.                                    **/
/*************************************************************************/
SGUI_INT GetCharIndex_GB2312(SGUI_UINT32 uiCode) {
  /*----------------------------------*/
  /* Variable Declaration             */
  /*----------------------------------*/
  SGUI_INT                    iIndex;
  SGUI_UINT8                  uiLowByte, uiHighByte;

  /*----------------------------------*/
  /* Initialize                       */
  /*----------------------------------*/
  // Initialize variable.
  iIndex =                    SGUI_INVALID_INDEX;

  /*----------------------------------*/
  /* Process                          */
  /*----------------------------------*/
  /* for ASCII characters. */
  if((uiCode > 0x19) && (uiCode < 0x7F)) {
    iIndex = uiCode - (0x20);
  } else {
    uiLowByte = (SGUI_UINT8)(uiCode & 0xFF);
    uiHighByte = (SGUI_UINT8)((uiCode >> 8) & 0xFF);
    /* For symbol characters. */
    if((uiCode > 0xA1A0) && (uiCode < 0xA9FF)) {
      iIndex = (((uiHighByte - 0xA1) * 94 + (uiLowByte - 0xA1)) * 2) + 95;
    } else if((uiCode > 0xB0A0) && (uiCode < 0xF7FF)) {
      iIndex = (((uiHighByte - 0xB0) * 94 + (uiLowByte - 0xA1)) * 2) + 1787;
    }
  }
  return iIndex;
}

/*************************************************************************/
/** Function Name:  StepNext_GB2312                                     **/
/** Purpose:        Read current character code order by input pointer  **/
/**                 and step to next character start pointer.           **/
/** Resources:      None.                                               **/
/** Params:                                                             **/
/** @ cszSrc[in]:   Current char pointer.                               **/
/** @ puiCode[in]:  Character code.                                     **/
/** Return:         Next character start pointer.                       **/
/*************************************************************************/
SGUI_CSZSTR StepNext_GB2312(SGUI_CSZSTR cszSrc, SGUI_UINT32* puiCode) {
  /*----------------------------------*/
  /* Variable Declaration             */
  /*----------------------------------*/
  const SGUI_CHAR*            pcNextChar;
  SGUI_UINT32                 uiCode;

  /*----------------------------------*/
  /* Initialize                       */
  /*----------------------------------*/
  pcNextChar =                cszSrc;
  uiCode =                    0;

  /*----------------------------------*/
  /* Process                          */
  /*----------------------------------*/
  if(NULL != pcNextChar) {
    do {
      uiCode = (SGUI_BYTE)(*pcNextChar++);
      if(uiCode < 0x7F) {
        break;
      }
      uiCode = uiCode << 8;
      uiCode |= (SGUI_BYTE)(*pcNextChar++);
    } while(0);
  }
  *puiCode = uiCode;

  return pcNextChar;
}

/*************************************************************************/
/** Function Name:  GB2312_GetFontData                                  **/
/** Purpose:        Read character data form font data.                 **/
/** Resources:      None.                                               **/
/** Params:                                                             **/
/** @ sStartAddr[in]: Read start address in memory.                     **/
/** @ pDataBuffer[in]: Character data dump buffer pointer.              **/
/** @ sReadSize[in]: Size of data will be read, always mean the buffer  **/
/**                 size.                                               **/
/** Return:         Data in process was be read.                        **/
/*************************************************************************/

SGUI_SIZE GB2312_GetFontData(SGUI_SIZE sStartAddr, SGUI_BYTE* pDataBuffer, SGUI_SIZE sReadSize) {
  /*----------------------------------*/
  /* Variable Declaration             */
  /*----------------------------------*/
  SGUI_SIZE                   sReadCount;
  const SGUI_BYTE*            pSrc = GB2312_H12 + sStartAddr;
  SGUI_BYTE*                  pDest = pDataBuffer;

  /*----------------------------------*/
  /* Initialize                       */
  /*----------------------------------*/
  pSrc =                      GB2312_H12 + sStartAddr;
  pDest =                     pDataBuffer;

  /*----------------------------------*/
  /* Process                          */
  /*----------------------------------*/

  if(NULL != pDataBuffer) {
    for(sReadCount = 0; sReadCount < sReadSize; sReadCount++) {
      *pDest++ = *pSrc++;
    }
  }

  return sReadCount;
}

/*************************************************************************/
/** Function Name:  GB2312_GetFontData                                  **/
/** Purpose:        Read character data form font data.                 **/
/** Resources:      None.                                               **/
/** Params:                                                             **/
/** @ sStartAddr[in]: Read start address in memory.                     **/
/** @ pDataBuffer[in]: Character data dump buffer pointer.              **/
/** @ sReadSize[in]: Size of data will be read, always mean the buffer  **/
/**                 size.                                               **/
/** Return:         Data in process was be read.                        **/
/*************************************************************************/
SGUI_BOOL GB2312_IsFullWidth(SGUI_UINT32 uiCode) {
  /*----------------------------------*/
  /* Variable Declaration             */
  /*----------------------------------*/
  SGUI_BOOL                   bReturn;

  /*----------------------------------*/
  /* Process                          */
  /*----------------------------------*/
  if(uiCode < 0x7F) {
    bReturn = SGUI_FALSE;
  } else {
    bReturn = SGUI_TRUE;
  }

  return bReturn;
}
